<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>saml.schema.samlp &mdash; python-saml 0.7.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="python-saml 0.7.0 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">python-saml 0.7.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for saml.schema.samlp</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">types</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">Element</span><span class="p">,</span> <span class="n">saml</span>


<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">Base</span><span class="p">):</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="s">&#39;samlp&#39;</span><span class="p">,</span> <span class="s">&#39;urn:oasis:names:tc:SAML:2.0:protocol&#39;</span>


<span class="k">class</span> <span class="nc">_Message</span><span class="p">(</span><span class="n">saml</span><span class="o">.</span><span class="n">_Message</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Contains common information found in most SAML/2.0 protocols.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># A URI reference indicating the address to which this request has</span>
    <span class="c"># been sent.</span>
    <span class="n">destination</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>

    <span class="c"># Indicates whether or not (and under what conditions) consent has</span>
    <span class="c"># been obtained from a principal in the sending of this request.</span>
    <span class="n">consent</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">NameIDPolicy</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tailors the name identifier in the subjects of assertions</span>
<span class="sd">    resulting from an &lt;AuthnRequest&gt;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># Specifies the URI reference corresponding to a name identifier format</span>
    <span class="c"># defined in this or another specification.</span>
    <span class="n">format</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>

    <span class="c"># Optionally specifies that the assertion subject&#39;s identifier be</span>
    <span class="c"># returned (or created) in the namespace of a service provider</span>
    <span class="c"># other than the requester, or in the namespace of an affiliation</span>
    <span class="c"># group of service providers</span>
    <span class="n">sp_name_qualifier</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;SPNameQualifier&#39;</span><span class="p">)</span>

    <span class="c"># A Boolean value used to indicate whether the identity provider is</span>
    <span class="c"># allowed, in the course of fulfilling the request, to create a</span>
    <span class="c"># new identifier to represent the principal.</span>
    <span class="n">allow_create</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Boolean</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">RequestedAuthenticationContext</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;RequestedAuthnContext&#39;</span>

    <span class="c"># Specifies the comparison method used to evaluate the requested</span>
    <span class="c"># context classes or statements, one of &quot;exact&quot;, &quot;minimum&quot;,</span>
    <span class="c"># &quot;maximum&quot;, or &quot;better&quot;. The default is &quot;exact&quot;.</span>
    <span class="n">comparison</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>

    <span class="c"># Specifies one or more URI references identifying authentication</span>
    <span class="c"># context classes or declarations.</span>
    <span class="n">reference</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">saml</span><span class="o">.</span><span class="n">AuthenticationContextReference</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Protocol</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The available URIs that identifies a SAML protocol binding to be used when</span>
<span class="sd">    returning the &lt;Response&gt; message.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_PREFIX</span> <span class="o">=</span> <span class="s">&#39;urn:oasis:names:tc:SAML:2.0:bindings:&#39;</span>

    <span class="n">SOAP</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">SOAP&#39;</span> <span class="o">%</span> <span class="n">_PREFIX</span>

    <span class="n">POAS</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">PAOS&#39;</span> <span class="o">%</span> <span class="n">_PREFIX</span>

    <span class="n">REDIRECT</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">HTTP-Redirect&#39;</span> <span class="o">%</span> <span class="n">_PREFIX</span>

    <span class="n">POST</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">HTTP-POST&#39;</span> <span class="o">%</span> <span class="n">_PREFIX</span>

    <span class="n">ARTIFACT</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">HTTP-Artifact&#39;</span> <span class="o">%</span> <span class="n">_PREFIX</span>

    <span class="n">URI</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">URI&#39;</span> <span class="o">%</span> <span class="n">_PREFIX</span>


<div class="viewcode-block" id="AuthenticationRequest"><a class="viewcode-back" href="../../../creating_documents.html#saml.schema.AuthenticationRequest">[docs]</a><span class="k">class</span> <span class="nc">AuthenticationRequest</span><span class="p">(</span><span class="n">_Message</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a SAML AuthnRequest</span>
<span class="sd">    ::</span>
<span class="sd">        from saml import schema</span>
<span class="sd">        from datetime import datetime</span>

<span class="sd">        document = schema.AuthenticationRequest()</span>
<span class="sd">        document.id = &#39;11111111-2222-3333-4444-555555555555&#39;</span>
<span class="sd">        document.issue_instant = datetime(2000, 1, 1)</span>
<span class="sd">        document.assertion_consumer_service_index = 0</span>
<span class="sd">        document.attribute_consuming_service_index = 0</span>
<span class="sd">        document.issuer = &#39;https://sp.example.com/SAML2&#39;</span>

<span class="sd">        policy = schema.NameIDPolicy()</span>
<span class="sd">        policy.allow_create = True</span>
<span class="sd">        policy.format = schema.NameID.Format.TRANSIENT</span>
<span class="sd">        document.policy = policy</span>

<span class="sd">        print document.tostring()</span>

<span class="sd">    Produces the following XML document:</span>

<span class="sd">    .. code-block:: xml</span>

<span class="sd">        &lt;samlp:AuthnRequest</span>
<span class="sd">            xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span>
<span class="sd">            xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span>
<span class="sd">            Version=&quot;2.0&quot;</span>
<span class="sd">            ID=&quot;11111111-2222-3333-4444-555555555555&quot;</span>
<span class="sd">            IssueInstant=&quot;2000-01-01T00:00:00Z&quot;</span>
<span class="sd">            AssertionConsumerServiceIndex=&quot;0&quot;</span>
<span class="sd">            AttributeConsumingServiceIndex=&quot;0&quot;&gt;</span>
<span class="sd">            &lt;saml:Issuer&gt;https://sp.example.com/SAML2&lt;/saml:Issuer&gt;</span>
<span class="sd">            &lt;samlp:NameIDPolicy</span>
<span class="sd">                Format=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:transient&quot;</span>
<span class="sd">                AllowCreate=&quot;true&quot;/&gt;</span>
<span class="sd">        &lt;/samlp:AuthnRequest&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;AuthnRequest&#39;</span>

    <span class="c"># A Boolean value. If &quot;true&quot;, the identity provider MUST authenticate</span>
    <span class="c"># the presenter directly rather than rely on a previous security context.</span>
    <span class="n">force_authn</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Boolean</span><span class="p">)</span>

    <span class="c"># A Boolean value. If &quot;true&quot;, the identity provider and the user agent</span>
    <span class="c"># itself MUST NOT visibly take control of the user interface from the</span>
    <span class="c"># requester and interact with the presenter in a noticeable fashion.</span>
    <span class="n">is_passive</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Boolean</span><span class="p">)</span>

    <span class="c"># A URI reference that identifies a SAML protocol binding to be used when</span>
    <span class="c"># returning the &lt;Response&gt; message.</span>
    <span class="n">protocol</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;ProtocolBinding&#39;</span><span class="p">)</span>

    <span class="c"># Indirectly identifies the location to which the &lt;Response&gt; message</span>
    <span class="c"># should be returned to the requester.</span>
    <span class="n">assertion_consumer_service_index</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Integer</span><span class="p">)</span>

    <span class="c"># Specifies by value the location to which the &lt;Response&gt; message MUST</span>
    <span class="c"># be returned to the requester.</span>
    <span class="n">assertion_consumer_service_url</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span>
        <span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;AssertionConsumerServiceURL&#39;</span><span class="p">)</span>

    <span class="c"># Indirectly identifies information associated with the requester</span>
    <span class="c"># describing the SAML attributes the requester desires or requires to be</span>
    <span class="c"># supplied by the identity provider in the &lt;Response&gt; message.</span>
    <span class="n">attribute_consuming_service_index</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Integer</span><span class="p">)</span>

    <span class="c"># Specifies the human-readable name of the requester for use by the</span>
    <span class="c"># presenter&#39;s user agent or the identity provider.</span>
    <span class="n">provider_name</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>

    <span class="c"># Specifies the requested subject of the resulting assertion(s).</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">saml</span><span class="o">.</span><span class="n">Subject</span><span class="p">)</span>

    <span class="c"># Specifies constraints on the name identifier to be used to represent</span>
    <span class="c"># the requested subject.</span>
    <span class="n">policy</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">NameIDPolicy</span><span class="p">)</span>

    <span class="c"># Specifies the requirements, if any, that the requester places on</span>
    <span class="c"># the authentication context that applies to the responding provider&#39;s</span>
    <span class="c"># authentication of the presenter.</span>
    <span class="n">requested_context</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">RequestedAuthenticationContext</span><span class="p">)</span>

    <span class="c"># Specifies a set of identity providers trusted by the requester to</span>
    <span class="c"># authenticate the presenter, as well as limitations and context</span>
    <span class="c"># related to proxying of the &lt;AuthnRequest&gt; message to subsequent identity</span>
    <span class="c"># providers by the responder.</span>
    <span class="c"># TODO: scoping = Element(Scoping)</span>

</div>
<span class="k">class</span> <span class="nc">StatusCode</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>

    <span class="c"># URI prefix for the values in this enumeration.</span>
    <span class="n">_PREFIX</span> <span class="o">=</span> <span class="s">&quot;urn:oasis:names:tc:SAML:2.0:status:&quot;</span>

    <span class="c"># The request succeeded.</span>
    <span class="n">SUCCESS</span> <span class="o">=</span> <span class="s">&quot;{}Success&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># Failure due to an error on the part of the requester.</span>
    <span class="n">REQUESTER</span> <span class="o">=</span> <span class="s">&quot;{}Requester&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The version of the request message was incorrect.</span>
    <span class="n">VERSION_MISMATCH</span> <span class="o">=</span> <span class="s">&quot;{}VersionMismatch&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The provider wasn&#39;t able to successfully authenticate the principal.</span>
    <span class="n">AUTHENTICATION_FAILED</span> <span class="o">=</span> <span class="s">&quot;{}AuthnFailed&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># Unexpected or invalid content was encountered.</span>
    <span class="n">INVALID_ATTRIBUTE_NAME_OR_VALUE</span> <span class="o">=</span> <span class="s">&quot;{}InvalidAttrNameOrValue&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The responding provider cannot support the requested name ID policy.</span>
    <span class="n">INVALID_NAME_ID_POLICY</span> <span class="o">=</span> <span class="s">&quot;{}InvalidNameIDPolicy&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The authentication context requirements cannot be met.</span>
    <span class="n">NO_AUTHENTICATION_CONTEXT</span> <span class="o">=</span> <span class="s">&quot;{}NoAuthnContext&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># None of the supported identity providers are available.</span>
    <span class="n">NO_AVAILABLE_IDP</span> <span class="o">=</span> <span class="s">&quot;{}NoAvailableIDP&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The responding provider cannot authenticate the principal passively.</span>
    <span class="n">NO_PASSIVE</span> <span class="o">=</span> <span class="s">&quot;{}NoPassive&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># None of the identity providers are supported by the intermediary.</span>
    <span class="n">NO_SUPPORTED_IDP</span> <span class="o">=</span> <span class="s">&quot;{}NoSupportedIDP&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># Not able to propagate logout to all other session participants.</span>
    <span class="n">PARTIAL_LOGOUT</span> <span class="o">=</span> <span class="s">&quot;{}PartialLogout&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># Cannot authenticate directly and not permitted to proxy the request.</span>
    <span class="n">PROXY_COUNT_EXCEEDED</span> <span class="o">=</span> <span class="s">&quot;{}ProxyCountExceeded&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># Is able to process the request but has chosen not to respond.</span>
    <span class="n">REQUEST_DENIED</span> <span class="o">=</span> <span class="s">&quot;{}RequestDenied&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The SAML responder or SAML authority does not support the request.</span>
    <span class="n">REQUEST_UNSUPPORTED</span> <span class="o">=</span> <span class="s">&quot;{}RequestUnsupported&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># Deprecated protocol version specified in the request.</span>
    <span class="n">REQUEST_VERSION_DEPRECATED</span> <span class="o">=</span> <span class="s">&quot;{}RequestVersionDeprecated&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># Protocol version specified in the request message is too low.</span>
    <span class="n">REQUEST_VERSION_TOO_LOW</span> <span class="o">=</span> <span class="s">&quot;{}RequestVersionTooHigh&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># Protocol version specified in the request message is too high.</span>
    <span class="n">REQUEST_VERSION_TOO_HIGH</span> <span class="o">=</span> <span class="s">&quot;{}RequestVersionTooLow&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># Resource value provided in the request message is invalid.</span>
    <span class="n">RESOURCE_NOT_RECOGNIZED</span> <span class="o">=</span> <span class="s">&quot;{}ResourceNotRecognized&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The response message would contain more elements than able.</span>
    <span class="n">TOO_MANY_RESPONSES</span> <span class="o">=</span> <span class="s">&quot;{}TooManyResponses&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># base.Attribute from an unknown attribute profile.</span>
    <span class="n">UNKNOWN_ATTR_PROFILE</span> <span class="o">=</span> <span class="s">&quot;{}UnknownAttrProfile&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The responder does not recognize the principal.</span>
    <span class="n">UNKNOWN_PRINCIPAL</span> <span class="o">=</span> <span class="s">&quot;{}UnknownPrincipal&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The SAML responder cannot properly fulfill the request.</span>
    <span class="n">UNSUPPORTED_BINDING</span> <span class="o">=</span> <span class="s">&quot;{}UnsupportedBinding&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_PREFIX</span><span class="p">)</span>

    <span class="c"># The status code value. This attribute contains a URI reference.</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>

    <span class="c"># A subordinate status code that provides more specific information</span>
    <span class="c"># on an error condition.</span>
    <span class="c"># TODO: code = Element(&#39;self&#39;)</span>


<span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>

    <span class="c"># A code representing the status of the activity carried out in</span>
    <span class="c"># response to the corresponding request.</span>
    <span class="n">code</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">StatusCode</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">StatusResponse</span><span class="p">(</span><span class="n">_Message</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extends the common message type with a status element.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># A reference to the identifier of the request to which the</span>
    <span class="c"># response corresponds, if any.</span>
    <span class="n">in_response_to</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>

    <span class="c"># A code representing the status of the corresponding request.</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">Status</span><span class="p">)</span>


<div class="viewcode-block" id="Response"><a class="viewcode-back" href="../../../creating_documents.html#saml.schema.Response">[docs]</a><span class="k">class</span> <span class="nc">Response</span><span class="p">(</span><span class="n">StatusResponse</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a SAML Response</span>
<span class="sd">    ::</span>
<span class="sd">        from saml import schema</span>
<span class="sd">        from datetime import datetime</span>

<span class="sd">        document = schema.Response()</span>
<span class="sd">        document.id = &#39;11111111-1111-1111-1111-111111111111&#39;</span>
<span class="sd">        document.in_response_to = &#39;22222222-2222-2222-2222-222222222222&#39;</span>
<span class="sd">        document.issue_instant = datetime(2000, 1, 1, 1)</span>
<span class="sd">        document.issuer = &#39;https://idp.example.org/SAML2&#39;</span>
<span class="sd">        document.destination = &#39;https://sp.example.com/SAML2/SSO/POST&#39;</span>
<span class="sd">        document.status.code.value = schema.StatusCode.SUCCESS</span>

<span class="sd">        # Create an assertion for the response.</span>
<span class="sd">        document.assertions = assertion = schema.Assertion()</span>
<span class="sd">        assertion.id = &#39;33333333-3333-3333-3333-333333333333&#39;</span>
<span class="sd">        assertion.issue_instant = datetime(2000, 1, 1, 2)</span>
<span class="sd">        assertion.issuer = &#39;https://idp.example.org/SAML2&#39;</span>

<span class="sd">        # Create a subject.</span>
<span class="sd">        assertion.subject = schema.Subject()</span>
<span class="sd">        assertion.subject.principal = &#39;44444444-4444-4444-4444-444444444444&#39;</span>
<span class="sd">        assertion.subject.principal.format = schema.NameID.Format.TRANSIENT</span>
<span class="sd">        data = schema.SubjectConfirmationData()</span>
<span class="sd">        data.in_response_to = &#39;22222222-2222-2222-2222-222222222222&#39;</span>
<span class="sd">        data.not_on_or_after = datetime(2000, 1, 1, 1, 10)</span>
<span class="sd">        data.recipient = &#39;https://sp.example.com/SAML2/SSO/POST&#39;</span>
<span class="sd">        confirmation = schema.SubjectConfirmation()</span>
<span class="sd">        confirmation.data = data</span>
<span class="sd">        assertion.subject.confirmation = confirmation</span>

<span class="sd">        # Create an authentication statement.</span>
<span class="sd">        statement = schema.AuthenticationStatement()</span>
<span class="sd">        assertion.statements.append(statement)</span>
<span class="sd">        statement.authn_instant = datetime(2000, 1, 1, 1, 3)</span>
<span class="sd">        statement.session_index = &#39;33333333-3333-3333-3333-333333333333&#39;</span>
<span class="sd">        reference = schema.AuthenticationContextReference</span>
<span class="sd">        statement.context.reference = reference.PASSWORD_PROTECTED_TRANSPORT</span>

<span class="sd">        # Create a authentication condition.</span>
<span class="sd">        assertion.conditions = conditions = schema.Conditions()</span>
<span class="sd">        conditions.not_before = datetime(2000, 1, 1, 1, 3)</span>
<span class="sd">        conditions.not_on_or_after = datetime(2000, 1, 1, 1, 9)</span>
<span class="sd">        condition = schema.AudienceRestriction()</span>
<span class="sd">        condition.audiences = &#39;https://sp.example.com/SAML2&#39;</span>
<span class="sd">        conditions.condition = condition</span>

<span class="sd">        print document.tostring()</span>

<span class="sd">    Produces the following XML document:</span>

<span class="sd">    .. code-block:: xml</span>

<span class="sd">        &lt;samlp:Response</span>
<span class="sd">            xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span>
<span class="sd">            xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span>
<span class="sd">            Version=&quot;2.0&quot;</span>
<span class="sd">            ID=&quot;11111111-1111-1111-1111-111111111111&quot;</span>
<span class="sd">            IssueInstant=&quot;2000-01-01T01:00:00Z&quot;</span>
<span class="sd">            Destination=&quot;https://sp.example.com/SAML2/SSO/POST&quot;</span>
<span class="sd">            InResponseTo=&quot;22222222-2222-2222-2222-222222222222&quot;&gt;</span>
<span class="sd">            &lt;saml:Issuer&gt;https://idp.example.org/SAML2&lt;/saml:Issuer&gt;</span>
<span class="sd">            &lt;samlp:Status&gt;</span>
<span class="sd">                &lt;samlp:StatusCode</span>
<span class="sd">                    Value=&quot;urn:oasis:names:tc:SAML:2.0:status:Success&quot;/&gt;</span>
<span class="sd">            &lt;/samlp:Status&gt;</span>
<span class="sd">            &lt;saml:Assertion</span>
<span class="sd">                Version=&quot;2.0&quot;</span>
<span class="sd">                ID=&quot;33333333-3333-3333-3333-333333333333&quot;</span>
<span class="sd">                IssueInstant=&quot;2000-01-01T02:00:00Z&quot;&gt;</span>
<span class="sd">                &lt;saml:Issuer&gt;https://idp.example.org/SAML2&lt;/saml:Issuer&gt;</span>
<span class="sd">                &lt;saml:Subject&gt;</span>
<span class="sd">                    &lt;saml:NameID</span>
<span class="sd">                        Format=</span>
<span class="sd">                        &quot;urn:oasis:names:tc:SAML:2.0:nameid-format:transient&quot;&gt;</span>
<span class="sd">                        44444444-4444-4444-4444-444444444444</span>
<span class="sd">                    &lt;/saml:NameID&gt;</span>
<span class="sd">                    &lt;saml:SubjectConfirmation</span>
<span class="sd">                        Method=&quot;urn:oasis:names:tc:SAML:2.0:cm:bearer&quot;&gt;</span>
<span class="sd">                        &lt;saml:SubjectConfirmationData</span>
<span class="sd">                            NotOnOrAfter=&quot;2000-01-01T01:10:00Z&quot;</span>
<span class="sd">                            Recipient=&quot;https://sp.example.com/SAML2/SSO/POST&quot;</span>
<span class="sd">                            InResponseTo=</span>
<span class="sd">                            &quot;22222222-2222-2222-2222-222222222222&quot;/&gt;</span>
<span class="sd">                    &lt;/saml:SubjectConfirmation&gt;</span>
<span class="sd">                &lt;/saml:Subject&gt;</span>
<span class="sd">                &lt;saml:Conditions</span>
<span class="sd">                    NotBefore=&quot;2000-01-01T01:03:00Z&quot;</span>
<span class="sd">                    NotOnOrAfter=&quot;2000-01-01T01:09:00Z&quot;&gt;</span>
<span class="sd">                    &lt;saml:AudienceRestriction&gt;</span>
<span class="sd">                        &lt;saml:Audience&gt;</span>
<span class="sd">                            https://sp.example.com/SAML2</span>
<span class="sd">                        &lt;/saml:Audience&gt;</span>
<span class="sd">                    &lt;/saml:AudienceRestriction&gt;</span>
<span class="sd">                &lt;/saml:Conditions&gt;</span>
<span class="sd">                &lt;saml:AuthnStatement</span>
<span class="sd">                    AuthnInstant=&quot;2000-01-01T01:03:00Z&quot;</span>
<span class="sd">                    SessionIndex=&quot;33333333-3333-3333-3333-333333333333&quot;&gt;</span>
<span class="sd">                    &lt;saml:AuthnContext&gt;</span>
<span class="sd">                        &lt;saml:AuthnContextClassRef&gt;</span>
<span class="sd">                            urn:oasis:names:tc:SAML:2.0:ac:classes:</span>
<span class="sd">                            PasswordProtectedTransport</span>
<span class="sd">                        &lt;/saml:AuthnContextClassRef&gt;</span>
<span class="sd">                    &lt;/saml:AuthnContext&gt;</span>
<span class="sd">                &lt;/saml:AuthnStatement&gt;</span>
<span class="sd">            &lt;/saml:Assertion&gt;</span>
<span class="sd">        &lt;/samlp:Response&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># Specifies an assertion by value, or optionally an encrypted assertion</span>
    <span class="c"># by value.</span>
    <span class="n">assertions</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">saml</span><span class="o">.</span><span class="n">Assertion</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

</div>
<span class="k">class</span> <span class="nc">Artifact</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The artifact value that the requester received and now wishes to</span>
<span class="sd">    translate into the protocol message it represents.</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">ArtifactResolve</span><span class="p">(</span><span class="n">_Message</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to request that a SAML protocol message be returned in an</span>
<span class="sd">    &lt;ArtifactResponse&gt; message by specifying an artifact that represents</span>
<span class="sd">    the SAML protocol message.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># The artifact value that the requester received and now wishes to</span>
    <span class="c"># translate into the protocol message it represents.</span>
    <span class="n">artifact</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">Artifact</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ArtifactResponse</span><span class="p">(</span><span class="n">StatusResponse</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Responds to an &lt;ArtifactResolve&gt; request with an embedded message</span>
<span class="sd">    that was referenced by the given artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># The embedded message.</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">_Message</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SessionIndex</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The identifier that indexes a session at the message recipient.</span>
<span class="sd">    &quot;&quot;&quot;</span>


<div class="viewcode-block" id="LogoutRequest"><a class="viewcode-back" href="../../../creating_documents.html#saml.schema.LogoutRequest">[docs]</a><span class="k">class</span> <span class="nc">LogoutRequest</span><span class="p">(</span><span class="n">_Message</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a SAML LogoutRequest</span>
<span class="sd">    ::</span>
<span class="sd">        from saml import schema</span>
<span class="sd">        from datetime import datetime</span>

<span class="sd">        document = schema.LogoutRequest()</span>
<span class="sd">        document.id = &#39;11111111-1111-1111-1111-111111111111&#39;</span>
<span class="sd">        document.issue_instant = datetime(2000, 1, 1)</span>
<span class="sd">        document.issuer = &#39;https://idp.example.org/SAML2&#39;</span>
<span class="sd">        document.destination = &#39;https://sp.example.org/SAML2/logout&#39;</span>
<span class="sd">        document.principal = &#39;myemail@mydomain.com&#39;</span>
<span class="sd">        document.principal.format = schema.NameID.Format.EMAIL</span>
<span class="sd">        document.principal.name_qualifier = &#39;https://idp.example.org/SAML2&#39;</span>
<span class="sd">        document.session_index = &#39;SESSION-22222222-2222-2222-2222-222222222222&#39;</span>

<span class="sd">        print document.tostring()</span>

<span class="sd">    Produces the following XML document:</span>

<span class="sd">    .. code-block:: xml</span>

<span class="sd">        &lt;samlp:LogoutRequest</span>
<span class="sd">            xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span>
<span class="sd">            xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span>
<span class="sd">            Version=&quot;2.0&quot;</span>
<span class="sd">            ID=&quot;11111111-1111-1111-1111-111111111111&quot;</span>
<span class="sd">            IssueInstant=&quot;2000-01-01T00:00:00Z&quot;</span>
<span class="sd">            Destination=&quot;https://idphost/adfs/ls/&quot;&gt;</span>
<span class="sd">            &lt;saml:Issuer&gt;https://idp.example.org/SAML2&lt;/saml:Issuer&gt;</span>
<span class="sd">            &lt;saml:NameID</span>
<span class="sd">                NameQualifier=&quot;https://idp.example.org/SAML2&quot;</span>
<span class="sd">                Format=&quot;urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress&quot;&gt;</span>
<span class="sd">                myemail@mydomain.com</span>
<span class="sd">            &lt;/saml:NameID&gt;</span>
<span class="sd">            &lt;samlp:SessionIndex&gt;</span>
<span class="sd">                SESSION-22222222-2222-2222-2222-222222222222</span>
<span class="sd">            &lt;/samlp:SessionIndex&gt;</span>
<span class="sd">        &lt;/samlp:LogoutRequest&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># The time at which the request expires, after which the recipient</span>
    <span class="c"># may discard the message.</span>
    <span class="n">not_on_or_after</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">DateTime</span><span class="p">)</span>

    <span class="c"># An indication of the reason for the logout, in the</span>
    <span class="c"># form of a URI reference.</span>
    <span class="n">reason</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>

    <span class="c"># The identifier and associated attributes</span>
    <span class="c"># (in plaintext or encrypted form) that specify the principal as</span>
    <span class="c"># currently recognized by the identity and service providers prior</span>
    <span class="c"># to this request.</span>
    <span class="n">principal</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">saml</span><span class="o">.</span><span class="n">NameID</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c"># The identifier that indexes this session at the message recipient.</span>
    <span class="n">session_index</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">SessionIndex</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="LogoutResponse"><a class="viewcode-back" href="../../../creating_documents.html#saml.schema.LogoutResponse">[docs]</a><span class="k">class</span> <span class="nc">LogoutResponse</span><span class="p">(</span><span class="n">StatusResponse</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a SAML LogoutResponse</span>
<span class="sd">    ::</span>
<span class="sd">        from saml import schema</span>
<span class="sd">        from datetime import datetime</span>

<span class="sd">        document = schema.LogoutResponse()</span>
<span class="sd">        document.id = &#39;22222222-2222-2222-2222-222222222222&#39;</span>
<span class="sd">        document.in_response_to = &#39;11111111-1111-1111-1111-111111111111&#39;</span>
<span class="sd">        document.issue_instant = datetime(2000, 1, 1)</span>
<span class="sd">        document.issuer = &#39;https://idp.example.org/SAML2&#39;</span>
<span class="sd">        document.destination = &#39;https://sp.example.com/SAML2/SLO/POST&#39;</span>
<span class="sd">        document.status.code.value = schema.StatusCode.SUCCESS</span>

<span class="sd">        print document.tostring()</span>

<span class="sd">    Produces the following XML document:</span>

<span class="sd">    .. code-block:: xml</span>

<span class="sd">        &lt;samlp:LogoutResponse</span>
<span class="sd">            xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span>
<span class="sd">            xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span>
<span class="sd">            Version=&quot;2.0&quot;</span>
<span class="sd">            ID=&quot;22222222-2222-2222-2222-222222222222&quot;</span>
<span class="sd">            IssueInstant=&quot;2000-01-01T00:00:00Z&quot;</span>
<span class="sd">            Destination=&quot;https://sp.example.com/SAML2/SLO/POST&quot;</span>
<span class="sd">            InResponseTo=&quot;11111111-1111-1111-1111-111111111111&quot;&gt;</span>
<span class="sd">            &lt;saml:Issuer&gt;https://idp.example.org/SAML2&lt;/saml:Issuer&gt;</span>
<span class="sd">            &lt;samlp:Status&gt;</span>
<span class="sd">                &lt;samlp:StatusCode</span>
<span class="sd">                    Value=&quot;urn:oasis:names:tc:SAML:2.0:status:Success&quot;/&gt;</span>
<span class="sd">            &lt;/samlp:Status&gt;</span>
<span class="sd">        &lt;/samlp:LogoutResponse&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Ryan Leckey.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.2</a>
      
    </div>

    

    
  </body>
</html>